---
---
/* for nojs */
@font-face {
	font-family: "04b03";
	src: url("/stadt/assets/fonts/04b03.woff")  format("woff");
	src: url("/stadt/assets/fonts/04b03.woff2") format("woff2");
}

@font-face {
	font-family: "Yesterweb Nova Square";
	src: url("https://cloudflare-ipfs.com/ipfs/QmaKT1nHC9JM5xmz7cRuRcB8jrkRjxdPsLaLnyzEta3e8R/NovaSquare.woff") format("woff");
}

/* -------------------------------- layout --------------------------------- */
@media (max-width: 1600px) {

	.window-9x {
		position: revert;
	}

	#window-area {
		display: flex;
		padding-top:   	2em;
		padding-bottom:	8em;
		flex-direction: column;
		align-items: center;
		gap: 20px;
	}
}

/* -------------------------------- windows -------------------------------- */
#welcome {
	z-index: 49;  // halfway
	top: 30vh;
	left: calc(50vw - 256px);
	width: 512px;

	& .window-content {
		// padding: 4px 8px;
		padding: 8px;
		gap: 8px;
		grid-template-areas:
			"title title"
			"body btns"
			"footer footer";
		// overflow-y: scroll;  // add dummy scrollbar for notepad æsthetic

		& #welcome-title {
			grid-area: title;
			font-size: 2rem;
			font-weight: 700;

			& #welcome-serif {
				font-family: var(--fnt-serif);
				font-size: 1.15em;  // just a mite bigger
				color: var(--txt-2);
			}
			& #welcome-sans {
				color: var(--s-org);
			}
		}
		& #welcome-body {
			grid-area: body;
			padding: 12px 16px;
			// background-image: linear-gradient(var(--s-ylw), var(--s-ylw));
			// background-blend-mode: overlay;  // mixing colours

			& p {
				padding-top: 0;
			}
		}
		& #page-info-buttons {
			grid-area: btns;
			width: 96px;
		}
		& #welcome-footer {
			grid-area: footer;

			& input:not(:checked) + label {
				visibility: hidden;
				position: relative;
				&::after {
					visibility: visible;
					position: absolute;
					left: 0;
					content: "You… you know this is just for show, right?";
				}
			}
		}
		// & pre {
			// margin: 0;
		// }
	}
}

#intro-text {
	z-index: 40;
	top: 10vh;
	left: 10vw;
	width: 512px;

	& .window-content {
		padding: 8px;
		overflow-y: scroll;  // add dummy scrollbar for notepad æsthetic
		max-height: 75vh; // ztodo: hacky fix
	}
}

#webrings {
	z-index: 46;
	top: 25vh;
	left: 65vw;

	& .window-content {
		width: 440px;
		padding: 4px;
		gap: 8px;
		grid-template-areas:
			"intro intro"
			"nojs yester"
			"geek  geek "
			"hotln hotln";

		& #wr-intro {
			grid-area: intro;
			text-align: center;
		}

		& #wr-nojs {
			grid-area: nojs;

			font-family: "04b03", system, chicago, sans-serif;
			background-color: var(--bgd-3);
			color: var(--txt-1);
			& a {
				text-shadow: 0 0 2px;

				&:link {
					color: var(--s-ppl);
				}
				&:visited {
					color: var(--d-ppl);
				}
			}
			border: 2px solid var(--bgd-0);
			gap: 4px;
			align-items: center;
			justify-content: center;
			text-align: center;

			display: grid;
			grid-template-areas:
				"prev prev next next"
				"spc2 rand rand spc3"
				"spc2 link link spc3";

			& #nojs-site {
				display: none;
			}
			& #nojs-prev {
				grid-area: prev;
			}
			& #nojs-next {
				grid-area: next;
			}
			& #nojs-rand {
				grid-area: rand;
			}
			& #nojs-link {
				grid-area: link;
			}
		}

		& #wr-yester {
			grid-area: yester;

			// background-image: url("https://cloudflare-ipfs.com/ipfs/QmaKT1nHC9JM5xmz7cRuRcB8jrkRjxdPsLaLnyzEta3e8R/gridnew.gif");
			background: var(--bgd-0);

			text-align: center;

			padding-left: 4px;
			padding-right: 4px;

			border-width: 2px;
			border-style: solid;
			border-top-color:    var(--s-grn);
			border-left-color:   var(--s-grn);
			border-bottom-color: var(--d-grn);
			border-right-color:  var(--d-grn);

			& .yw-title {
				font-family: "Yesterweb Nova Square", Impact;
				color: var(--s-grn);
				font-weight: normal;
			}
			& a {
				color: var(--s-grn);
			}
		}

		& #wr-geekring {
			grid-area: geek;
			padding: 8px;
			// width: 400px;

			background: linear-gradient(var(--d-aqa), var(--d-blu));

			display: grid;
			// grid-template-areas:
				// "label label label"
				// "btn-1 btn-2 btn-3";
			grid-auto-flow: column;
			grid-template-columns: repeat(3, 1fr);
			gap: 2px;

			& p {
				// grid-area: label;
				text-align: center;
				grid-column: 1 / 4;
				grid-row:    1 / 2;
				font-family: "Arial", sans-serif;
				font-size: 1.3em;
				font-weight: bold;
				-webkit-text-stroke: 1px var(--txt-2);
				-webkit-text-fill-color: var(--bgd-0);

				& span {
					font-style: oblique;

					& a {
						text-decoration: underline dotted;
					}
				}
			}

			& .btn-9x {
				width: 88px;
				grid-row: 2 / 3;
			}
		}

		& #wr-hotline {
			grid-area: hotln;

			text-align: center;
			font-family: var(--fnt-sans);
			font-size: 2em;
			font-weight: 900;
			font-style: oblique;
			text-transform: uppercase;

			text-shadow: 0.05em 0.05em var(--d-ppl);

			& a {

				&[lang="und-Zsym"]{
					//[nyi]: https://drafts.csswg.org/css-fonts-4/#font-variant-emoji-prop
					font-variant-emoji: text;
				}
				color: var(--s-blu);

				&:visited {
					color: var(--s-grn);
				}
				&:hover {
					color: var(--s-ppl);
				}
				&:active {
					color: var(--s-aqa);
				}
			}
			z-index: 0;
			position: relative;  // for background (ztodo towers)
			&:before {
				content: "";
				position: absolute;
				top: 0px;
				right: 0px;
				bottom: 0px;
				left: 0px;

				z-index: -1;
				background-image: url(/stadt/assets/images/backgrounds/hotline.png);
				background-size: cover;
				background-position: center;
				border-radius: 4px;
				filter: blur(4px);
				// opacity: 0.5;
			}
		}
	}
}

#radio-player {
	z-index: 40;
	top: 10vh;
	left: 80vw;
}

#music-player {
	z-index: 45;
	top: 65vh;
	left: 35vw;

	& .window-content {
		// padding: 1px;
		// width: 100%;
		padding: 8px;
		gap: 4px 8px;
		grid-template-rows:    min-content;
		grid-template-columns: max-content;

		& #current-song {
			width: 274px;  // narrowest it can be and still have a volume scrubber
			height: calc(100% - 9px);  // list elements have bottom padding of 9?
			// height: 60px;
			// background-color: var(--d-org);
			// maybe album art? if taller
			// background: url("/stadt/assets/images/backgrounds/chainlink.jpg");
			// ztodo this image is not permanent
			background: url("/stadt/assets/images/backgrounds/swirl.png");
			grid-area: 1 / 1 / 2 / 3;
			// display: inline-flex;
			// justify-content: center;

			& audio {
				width:  100%;
				height: 100%;
				border-radius: 0;
				opacity: 0.8;

				/* ooh chrome aren't we special */
				&::-webkit-media-controls-enclosure {
					border-radius: 0;
				}
				// i think this is probably an unanounced feature–let it sleep for now
				// --media-background: var(--bgd-0);
				// --duration-color: var(--d-ylw);
			}
		}
		& table {
			grid-column: 1 / 4;
		}
		& .button-grid {  // ztodo make generic
			// why does everything have padding-left: 40px;?? ztodo
			list-style-type:none;
			display: inline-block;
			padding: 0;
			margin: 0;
			grid-area: 1 / 3 / 2 / 4;
		}
		& .current-artist {
			grid-row: 2 / 3;
		}
		& .current-title {
			grid-row: 3 / 4;
		}
		& .current-label {
			text-align: right;
			// width: 64px;
			margin: 0;
			padding: 2px 2px;  // for border size
			grid-column: 1 / 2;
		}
		& .current-info {
			margin: 0;
			padding: 0px 2px;
			// background-color: var(--bgd-3);
			// width: auto;
			grid-column: 2 / 4;
		}

		// & #current-song-info > p:nth-child(2n) {
			// text-align: right;
			// grid-area: 2 / 1 / 3 / 2;
		// }
		// & #current-song-info > p:nth-child(2n+1) {
			// text-align: right; grid-column-start: 2; grid-column-end: 3;
			// grid-area: 2 / 2 / 3 / 3;
		// }
	}

	// & iframe {
	// 	width:  512px;
	// 	height: 256px;
	// }
}

#quote {
	z-index: 35;
	top:   3vh;
	left: 60vw;
	width: 50ch;

	& blockquote {
		font-family: var(--fnt-serif);
		font-size: 1.3em;
		padding: 1em;

		&::first-letter {
			float: left;
			font-size: 4em;
			color: var(--s-ylw);
			padding-right: 0.04em;
		}
	}
	& footer {
		// display: flex;
		padding: 2px 1ch;
		text-align: right;
		color: var(--txt-3);

		& a {
			&::before,
			&::after {
				color: var(--txt-3);
				text-decoration: none;
				display: inline-block;
			}

			&::before {
				content: "\00a0–\00a0";
			}
			&::after {
				content: ",";
			}
		}

		// & a,
		// & time {
			// width: 100%;
			// padding: 2px 1ch;
		// }
		// & time {
			// text-align: right;
		// }
	}
}

/* ============================== animations =============================== */

#welcome-sans {
	// rainbow text
	animation: colour-cycle 5s linear infinite;
	// glitch text (needs work)
	/* color: var(--txt-0) !important;

	position: relative;
		// &::before,
		&::after {
		position: absolute;
		left: 0;
		top: 0;
		content: "Ɀeus' Stadt";
		// https://discourse.wicg.io/t/text-content-css-value-akin-to-attr/629/15
		// https://lists.w3.org/Archives/Public/www-style/2013Oct/0617.html
		// content: text()
		text-shadow:
			0.065em 	0       	0	var(--d-red),
			-0.045em	-0.065em	0	var(--d-grn),
			0.045em 	0.065em 	0	var(--d-blu);
			opacity: 0.8;

		}

		&::after {
			// color: red !important;
			animation: glitch-text 5s linear infinite;
			// clip-path: polygon(0 0, 100% 0, 100% 35%, 0 65%);
			transform: translate(-0.075em, -0.05em);
		}*/
}

@media (prefers-reduced-motion) {
	#welcome-sans {
		animation: none;
	}
}

@keyframes glitch-text {
	/* needs work */
	0% {
		clip-path: polygon(0% 20%, 100% 0%, 100% 15%, 0% 85%);
	}
	19% {
		clip-path: polygon(0% 20%, 100% 0%, 100% 15%, 0% 85%);
	}
	20% {
		clip-path: polygon(0% 0%, 100% 0%, 100% 35%, 0% 65%);
	}
	39% {
		clip-path: polygon(0% 0%, 100% 0%, 100% 35%, 0% 65%);
	}
	40% {
		clip-path: polygon(0% 0%, 100% 30%, 100% 30%, 0% 20%);
	}
	69% {
		clip-path: polygon(0% 0%, 100% 30%, 100% 30%, 0% 20%);
	}
	// 100% {
		// clip-path: polygon(0% 85%, 100% 90%, 100% 20%, 0% 100%);
	// }
}

@keyframes colour-cycle {
	0% {
		color: var(--s-org);
	}
	14% {
		color: var(--s-ylw);
	}
	29% {
		color: var(--s-grn);
	}
	43% {
		color: var(--s-aqa);
	}
	57% {
		color: var(--s-blu);
	}
	71% {
		color: var(--s-ppl);
	}
	86% {
		color: var(--s-red);
	}
	100% {
		color: var(--s-org);
	}
}