---
---

// https://www.deviantart.com/niivu/art/Macindows-870073866
// https://gist.github.com/bluh/2b95102fd6d3732dc9825be749498fa9
// https://88x31.tumblr.com/
// https://www.reddit.com/r/desktops/comments/nlq789/recreated_windows_95_in_my_desktop_fully/
// ztodo remove spotify player
// ztodo consolidate fonts

@font-face {
	font-family: "FixedsysEx";
	font-style: normal;
	font-weight: normal;
	src: local("Fixedsys Excelsior"),
	       url("/assets/fonts/FixedsysEx.ttf") format("truetype"),
	       url("/assets/fonts/FixedsysEx.woff") format("woff");
}

@import url("https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,400;0,600;1,400;1,600&display=swap");

/* variables */
:root {
	--h-pad: 1em; // horizontal padding
	--v-pad: 1em; // vertical padding
	//console style font (used for '95/98 buttons)
	          /* windows,    macos    generic */
	--csl-fnt: "consolas", "monaco", monospace;

	/* universal colours */
	--d-red: #CC241D;
	--d-grn: #98971A;
	--d-ylw: #D79921;
	--d-blu: #458588;
	--d-ppl: #B16286;
	--d-aqa: #689D6A;
	--d-org: #D65D0E;

	// dark mode colours
	--bgd-0: #282828;
	--bgd-1: #3C3836;
	--bgd-2: #504945;
	--bgd-3: #665C54;
	--bgd-4: #7C6F64;
	--bgd-5: #928374;
	--txt-4: #A89984;
	--txt-3: #BDAE93;
	--txt-2: #D5C4A1;
	--txt-1: #EBDBB2;
	--txt-0: #FBF1C7;
	--s-red: #FB4943;
	--s-grn: #B8BB26;
	--s-ylw: #FABD2F;
	--s-blu: #83A598;
	--s-ppl: #D3869B;
	--s-aqa: #8EC07C;
	--s-org: #FE8019;
	--btn-hilite: var(--bgd-4);
	--btn-lolite: var(--bgd-0);
}

/* light mode colours */
@media (prefers-color-scheme: light) {
	:root {
		--bgd-0: #FBF1C7;
		--bgd-1: #EBDBB2;
		--bgd-2: #D5C4A1;
		--bgd-3: #BDAE93;
		--bgd-4: #A89984;
		--bgd-5: #928374;
		--txt-4: #7C6F64;
		--txt-3: #665C54;
		--txt-2: #504945;
		--txt-1: #3C3836;
		--txt-0: #282828;
		--s-red: #9D0006;
		--s-grn: #79740E;
		--s-ylw: #B57614;
		--s-blu: #076678;
		--s-ppl: #8F3F71;
		--s-aqa: #427B58;
		--s-org: #AF3A03;
		--btn-hilite: var(--bgd-0);
		--btn-lolite: var(--bgd-4);
	}
}

html {
	/* smoothly scroll to anchor link */
	scroll-behavior: smooth;

		/* this is here because i think it's semantically easier to read */
		/* offset anchor link down from the top of the page */
	& :target:before {
		content: "";
		display: block;
		height: 2em;
		margin: -2em 0 0;
	}
}

body {
	background-color: var(--d-aqa);
	// background-image: url("/stadt/assets/images/backgrounds/chainlink.jpg");
	// background texture (base 64 encoded image)
	background-image: url("data:image/png;base64,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");
	color: var(--txt-1);
	font-family: "Fira Sans";
	margin:0;
	padding:0;
	border:0;
}

h1, h2 {
	color: var(--s-org);
	border-bottom: 0.1em solid var(--d-org);
}
h3, h4, h5, h6 {
	color: var(--s-org);
}

strong, b { // bold (for ctrl+f)
	color: var(--txt-0);
}

em, i { // italic (for ctrl+f)
	color: var(--s-ylw);
}

a {
	// i just think this layout is easier to read
	&:link {
		color: var(--s-blu);
		// text-decoration: underline;
	}

	&:visited {
		color: var(--s-ppl);
	}

	&:active, &:focus {
		color: var(--s-red);
	}
}

.btn-88x31,
.btn-80x15,
.btn-150x15,
.pixel-art,
.window-title:before {
	/* render pixel art pixelly when zoomed in */
	image-rendering: pixelated;   /* fallback, pixellated */
	image-rendering: crisp-edges; /* unsure, filter e.g. hq2x */
}
.btn-88x31 {
	width:  88px;
	height: 31px;
}
.btn-80x15 {
	width:  80px;
	height: 15px;
}
.btn-150x15 {
	width: 150px;
	height: 15px;
}
.window-title:before {
		// content: url(/stadt/assets/images/window-icons/cd-player.png);
		height: 16px;
		width: 16px;  // ztodo make generic
		padding-right: 2px;  // ztodo this is not vertically centred
	}
/* colour highlighted text */
mark {
	margin: -0.5em -0.5ch;
	padding: 0.5em 0.5ch;
	background-color: var(--d-ylw);
}

.ms-bold {
	// ms sans serif style bold by doubling text width
	// text-shadow: 0.5px 0px var(--txt-1),
	             // 1.0px 0px var(--txt-1)/*,
	             // 1.5px 0px var(--txt-1)*/;

		// font-family: "Fira Sans";
		// font-size: 12pt;
		// letter-spacing: 1px;
		font-family: "Fira Sans";
		font-weight: bold;
}

.mc-window { // macindows window
	// margin: 8px;
	border: 2px solid var(--d-aqa);
	padding: 12px;
	border-radius: 8px;
	box-shadow: 4px 7px 0px 0px var(--bgd-2);

	background: var(--bgd-1);

	padding: 8px;
}

.btn-9x,
.window-decs li {  // ztodo window buttons don't click
	display: inline-block;
	text-align: center;
	// justify-content: center;
	margin: 1px;
	// padding: 2px;
	margin: auto;
	// width: 88px;
	// height: 31px;
	// color: black !important;
	color: var(--txt-1) !important; //!important overrides link styling
	font-family: var(--csl-fnt);
	text-decoration: none;
	background: var(--bgd-2);

	&:active {
		border-top-color:    var(--btn-lolite);
		border-left-color:   var(--btn-lolite);
		border-bottom-color: var(--btn-hilite);
		border-right-color:  var(--btn-hilite);

	}
}

.window-9x,
.btn-9x,
.window-decs li:before {
	background-color: var(--bgd-2);
	// padding: 4px;
	padding: 2px;
	border-width: 2px;
	border-style: solid;
	border-top-color:    var(--btn-hilite);
	border-left-color:   var(--btn-hilite);
	border-bottom-color: var(--btn-lolite);
	border-right-color:  var(--btn-lolite);
}
.window-titlebar {
	background-color: var(--s-blu);
	color: var(--bgd-1);
	margin: 0px 0px 2px 0px;
	padding: 0px 2px;
	height: 20px;

	display: flex;
	flex-direction: row;
	justify-content: space-between;
	align-items: center;

	& .window-decs {
		margin: 0px;

		& .window-min:before {
			content: "󰖰";
		}
		& .window-max:before {
			content: "󰖯";
		}
		& .window-cls:before {
			content: "󰖭";
		}

		& li {
			visibility: hidden;  // hide to replace with before
			font-family: "Material Design Icons";
			margin-right: 16px;  // ztodo why this arbitrary number?

			&:before {  // attributes for all buttons
				content: " ";
				visibility: visible;
				display: inline-block;
				position: absolute;
				margin: 0px;
				padding: 0px;
				top: 4px;  // the tip says this has no effect but it really does
				// font-family: "Material Design Icons";
				font-size: 0.6em;
				color: var(--txt-0);
				width: 1.2em;  // make square(ish)
				height: 1.2em;
			}
		}
	}
}
.window-menu ul {
	margin: 0px;
	padding: 0px;
	cursor: default;

	& li {
		display: inline-block;
		padding: 0px 4px;
		user-select: none;

		&:hover {
			background-color: var(--bgd-3);
		}
		&:active u {
			color: var(--txt-0);
		}
	}
}

.indent-95 {
	margin: 0px;
	background-color: var(--bgd-0);
	border-width: 2px;
	border-style: solid;
	border-top-color:    var(--btn-lolite);
	border-left-color:   var(--btn-lolite);
	border-bottom-color: var(--btn-hilite);
	border-right-color:  var(--btn-hilite);
}

#music-player {
	position: absolute;
	top: 512px;
	left: 64px;

	& .window-title:before {
		content: url(/stadt/assets/images/window-icons/cd-player.png);
	}

	& .window-content {
		// padding: 1px;
		// width: 100%;
		padding: 8px;
		display: grid;
		gap: 4px 8px;
		grid-template-row:     min-content;
		grid-template-columns: max-content;

		& #current-song {
			width: 274px;  // narrowest it can be and still have a volume scrubber
			height: calc(100% - 9px);  // list elements have bottom padding of 9?
			// height: 60px;
			// background-color: var(--d-org);
			// maybe album art? if taller
			// background: url("/stadt/assets/images/backgrounds/chainlink.jpg");
			background: url("/stadt/assets/images/backgrounds/swirl.gif");
			grid-area: 1 / 1 / 2 / 3;
			// display: inline-flex;
			// justify-content: center;

			& audio {
				width: 100%;
				height: 100%;
				border-radius: 0px;
				opacity: 0.8;

				// i think this is probably an unanounced feature–let it sleep for now
				// --media-background: var(--bgd-0);
				// --duration-color: var(--d-ylw);
			}
		}
		& .button-grid {  // ztodo make generic
			// why does everything have padding-left: 40px;?? ztodo
			list-style-type:none;
			display: inline-block;
			padding: 0px;
			margin: 0px;
			grid-area: 1 / 3 / 2 / 4;
		}
		& .current-artist {
			grid-row: 2 / 3;
		}
		& .current-title {
			grid-row: 3 / 4;
		}
		& .current-label {
			text-align: right;
			// width: 64px;
			margin: 0px;
			padding: 2px 2px;  // for border size
			grid-column: 1 / 2;
		}
		& .current-info {
			margin: 0px;
			padding: 0px 2px;
			// background-color: var(--bgd-3);
			// width: auto;
			grid-column: 2 / 4;
		}

		// & #current-song-info > p:nth-child(2n) {
			// text-align: right;
			// grid-area: 2 / 1 / 3 / 2;
		// }
		// & #current-song-info > p:nth-child(2n+1) {
			// text-align: right; grid-column-start: 2; grid-column-end: 3;
			// grid-area: 2 / 2 / 3 / 3;
		// }
	}

	// & iframe {
	// 	width:  512px;
	// 	height: 256px;
	// }
}

.taskbar-9x {
	position: fixed;
	bottom: 0px;

	display: flex;
	justify-content: space-between;

	/* borders */
	border-top: 2px solid var(--bgd-4);
	padding: 2px 2px 0px 2px;
	width: calc(100% - 4px);  // 4px padding otherwise scrollbar

	white-space: nowrap;
	overflow: hidden;
	text-decoration: none;
	background: var(--bgd-2);

	& * {
	margin: 0px;
	padding: 0px;
	list-style-type:none;
	display: inline-block;
	}

	& #btn-start {
		// display: inline-flex;  // ztodo maybe try this
		// flex-direction: space-around;
		width: 76px;        // }
		height: 29px;       // } this is really hacky, but it's
		margin-bottom: 2px; // } the only thing that works
		line-height: 29px;  // }
		// font-family: "Fira Sans";
		// font-size: 12pt;
		// // text-shadow: 0.5px 0px var(--txt-1),
		// //              1.0px 0px var(--txt-1),
		// //              1.5px 0px var(--txt-1);
		// // color: transparent;
		// letter-spacing: 1px;

		& #start-orb {
			background-size: 16px 16px;
			color: var(--s-org);
			padding-top: 0.4em;  // hacky
			height: 0.8em;
			width: auto;
		}

		// &:before {  // proof of concept inline start orb
			// content: "";
			// background-image: url("/stadt/assets/images/logo.svg");
			// width: 100px;
			// content: "";
			// background-image: url("../../favicon.ico");
			// background-size: 16px 16px;
		// }
	}

	& #btn-sep {
		height: 20px;
		&:active {  // "disable" clicking on separator
			border-top-color:    var(--btn-hilite);
			border-left-color:   var(--btn-hilite);
			border-bottom-color: var(--btn-lolite);
			border-right-color:  var(--btn-lolite);
		}
	}

	& #taskbar-btns, #taskbar-tray {
		display: flex;
		flex-direction: row;
		// flex-wrap: nowrap;  // default
		// justify-content: flex-start;  // default
		align-items: center;
		& li {
			display: inline-block;
			margin-right: 4px;
		}
	}

	& #taskbar-tray {
		height: 29px;
		// width: 256px;

		justify-content: flex-end;
		align-items: center;

		border: 2px;
		border-style: solid;
		border-top-color:    var(--btn-lolite);
		border-left-color:   var(--btn-lolite);
		border-bottom-color: var(--btn-hilite);
		border-right-color:  var(--btn-hilite);
	}
}

#taskbar-balloon {
	position: absolute;
	bottom: 44px;
	right: 32px;

	background-color: var(--bgd-0);
	width: 256px;
	// height: 64px;

	border: 2px solid var(--txt-2);
	border-radius: 16px;
	padding: 12px;

	// https://codingislove.com/css-speech-bubbles/
	&:before {
		content: "";
		width: 0px;
		height: 0px;
		position: absolute;
		border-left: 10px solid transparent;
		border-right: 10px solid var(--txt-0);
		border-top: 10px solid var(--txt-0);
		border-bottom: 10px solid transparent;
		right: 22px;
		bottom: -20px;
	}
	&:after {
		content: "";
		width: 0px;
		height: 0px;
		position: absolute;
		border-left: 10px solid transparent;
		border-right: 10px solid var(--bgd-0);
		border-top: 10px solid var(--bgd-0);
		border-bottom: 10px solid transparent;
		right: 24px;
		bottom: -16px;
	}
}

#content {
	width: min(100%, 1100px);
	margin: auto;
	display: grid;
	grid-gap: 16px 16px; // row column
}

#sidebar-left, #sidebar-right {

	width: 25%vw;
	max-width: calc(176px + var(--h-pad)); //ztodo variable

	// text-align: justify;
}

#header {
	// height: 100px;
	// position: sticky
	grid-row-start: 1;
	grid-row-end:   1;
	grid-column-start: 1;
	grid-column-end:   4;
}

#sidebar-left {
	grid-row-start: 2;
	grid-row-end:   2;
	grid-column-start: 1;
	grid-column-end:   1;
}

#sidebar-right {
	grid-row-start: 2;
	grid-row-end:   2;
	grid-column-start: 3;
	grid-column-end:   3;
}

#main-content {
	grid-row-start: 2;
	grid-row-end:   2;
	// width: auto; // implicit
	grid-column-start: 2;
	grid-column-end:   2;

}

// #footer {
	// grid-column-start: 1;
	// grid-column-end:   4;
//
	// grid-row-start: 3;
	// grid-row-end:   3;
// }


.img-grid {
	width: 100%;
	margin: 0px;
	padding: 0px; // this is because it's a list, and padding breaks it
	justify-content: center;
	display: flex; //this is because i want it to be dynamic to width of sidebar
	flex-flow: row wrap;

	& img {
		margin: 0px 1px;
	}

	& ::marker {
		content: "";
	}
}

// marquee animation copied from: https://hotlinecafe.com/
.marquee-container {
	overflow: hidden;
	/* don't optimise by not animating gifs */
	will-change: contents;
}

.marquee-rtl, .marquee-ltr {
	width: max-content;
	/* don't optimise - hotline used this, but i think above works better? */
	will-change: scroll-position;

	// start onscreen (not 100%) ((never mind))
	padding-left: 100%;

	&:hover {
		animation-play-state: paused;
	}

	& li {
		display: inline-block;
		will-change: transform;

		&::marker {
		content: "";
		}
	}
}

.marquee-rtl {
	// change timer when adding more images - was 50s in hlcafe
	animation: marquee-rtl 35s linear infinite;
}

.marquee-ltr {
	animation: marquee-ltr 35s linear infinite;
}

@keyframes marquee-rtl {
	0% {
		transform: translate(0, 0);
	}

	100% {
		transform: translate(-100%, 0);
	}
}

@keyframes marquee-ltr {
	0% {
		transform: translate(-100%, 0);
	}
	100% {
		transform: translate(0, 0);
	}
}

@media (prefers-reduced-motion) {
	.marquee-rtl, .marquee-ltr {
		animation-play-state: paused;
		padding-left: 0%;

		&:hover {
			animation-play-state: running;
		}
	}
}
