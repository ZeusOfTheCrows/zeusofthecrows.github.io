---
---

body {
	background-image: url("/stadt/assets/images/shrines/mv/backgrounds/crocomire.png");
	background-attachment: fixed;
}

main {
	max-width: unset;
	width: min(100vw, 120ch);
}

main>article {
	background: black;
}

/* ZTODO: MAKE THIS A GLOBAL - SOMETHING LIKE LEGIBILITY-TINT-COLOUR */
@media (prefers-color-scheme: light) {
	main>article {
		background: white;
	}
}

#m-sm {
	&>h2 {
	background-image: url("/stadt/assets/images/shrines/mv/backgrounds/m-sm.jpg");
	}
	&::before {
		background-image: url("/stadt/assets/images/shrines/mv/backgrounds/m-sm.jpg");
	}
}

#m-md {
	&>h2 {
	background-image: url("/stadt/assets/images/shrines/mv/backgrounds/m-md.jpg");
	}
	&::before {
		background-image: url("/stadt/assets/images/shrines/mv/backgrounds/m-md.jpg");
	}
}

#m-sr {
	&>h2 {
	background-image: url("/stadt/assets/images/shrines/mv/backgrounds/m-sr.jpg");
	}
	&::before {
		background-image: url("/stadt/assets/images/shrines/mv/backgrounds/m-sr.jpg");
	}
}

#m-om {
	&>h2 {
	// ZTODO THESE ARE NOT VARIABLES DUE TO [UNDOCUMENTED?] SCSS BUG
	// (CANNOT ASSIGN URL() TO VARIABLE)
	background-image: url("/stadt/assets/images/shrines/mv/backgrounds/m-om.jpg");
	// this is here so i don't accidentally add it to a section that doesn't have a logo
	font-size: 0;
	height: var(--height);
	}
	&::before {
		background-image: url("/stadt/assets/images/shrines/mv/backgrounds/m-om.jpg");
	}
	&>h2::after {
		background-image: url("/stadt/assets/images/shrines/mv/logos/m-om.png");
	}
}

#m-zm {
	&>h2 {
	background-image: url("/stadt/assets/images/shrines/mv/backgrounds/m-zm.jpg");
	}
	&::before {
		background-image: url("/stadt/assets/images/shrines/mv/backgrounds/m-zm.jpg");
	}
}

#m-fu {
	&>h2 {
	background-image: url("/stadt/assets/images/shrines/mv/backgrounds/m-fu.jpg");
	}
	&::before {
		background-image: url("/stadt/assets/images/shrines/mv/backgrounds/m-fu.jpg");
	}
}

main>article>section {

	color: lightblue;
	background-attachment: fixed;

	&>:not(h2) {
		padding-inline: 2ch;
		max-width: 80ch;
		margin-inline: auto;
	}

	&>h1,
	&>h2 {
		margin-block: 0;
		text-align: center;
		font-size: 2em;
		--height: 200px;
		background-size: cover;
		background-repeat: no-repeat;
		background-position: center;
		position: relative;
	}
	&>h2{
		mask-image: linear-gradient(black calc(var(--height) - 40px), transparent);
		&::after {
			height: 100%;
			width: 100%;
			background-size: contain;
			background-repeat: no-repeat;
			background-position: center;
			position: absolute;
			left: 0;
			content: "";
		}
	}

	& pre {
		width: min-content;
		// text-align: center;
		padding-inline: 2ch;
		margin-inline: auto;
		max-height: 8em;
		overflow: auto;
	}

	// all below is used to blur background with sharp edges
	position: relative;
	isolation: isolate;
	&::before,
	&::after {
		content: "";
		position: absolute;
		inset: 0;
		z-index: -1;
	}

	&::before {
		background-attachment: fixed;
		// ZTODO THESE ARE NOT VARIABLES DUE TO [UNDOCUMENTED?] SCSS BUG
		// (CANNOT ASSIGN URL() TO VARIABLE)
		background-size: cover;
		opacity: 0.2;
		filter: blur(4px);
		filter: url('data:image/svg+xml,\
			<svg xmlns="http://www.w3.org/2000/svg">\
				<filter id="blur" x="0" y="0" width="100%" height=100%"\
					xmlns="http://www.w3.org/2000/svg">\
					<feGaussianBlur in="SourceGraphic" stdDeviation="3" />
				</filter>\
			</svg>#blur');
	}
	&::after {
		backdrop-filter: blur(3px);
	}
}
