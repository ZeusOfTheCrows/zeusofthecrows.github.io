---
---

// znotes:
// * i think empty selectors are fine, sass compiler removes them
// * "//" comments are sass only, "/*" comments get compiled to css

/*==================================imports==================================*/
@import "vars.scss";
@import "nav-menu.scss";
@import "webrings.scss";

/*================================= layout ==================================*/
.whole-wrapper {
	display: grid;
	width: min(88vw, 112ch);
	/* limit max width, and centre */
	// width: $total-width;
	margin: 2vh auto;
	// padding: 2vh 0;
	// i don't know why i can't just use "1fr", but it doesn't work
	grid-template-columns: 17ch calc(100% - 17ch);
	grid-row-gap: 0px;
	grid-column-gap: 1em;
	grid-template-areas:
		"header header"
		"menu  content"
		"footer footer";
}
.site-header {
	grid-area: header;
}

a.skip-nav-link {
	// https://youtu.be/jDDaOFr9nqQ
	position: fixed;
	top: 0;
	left: 0;
	transform: translateY(-3em);
	background: $background-emph;
	color: $text-12 !important;  // !important as this is an accessibility item
	padding: 2ch 2em;
	border-radius: 0 0 $crnr-radius 0;
	&:focus {
		transform: translateY(0);
		transition: transform 325ms ease-in;
	}
}
#nav-menu {
	grid-area: menu;
}
#content {
	grid-area: content;
}
#footer {
	grid-area: footer;
}

@media only screen and (max-width: $logo-breakpoint) {
	.whole-wrapper {
		// i think this makes sure things don't align side by side
		grid-template-columns: 100%;
		grid-template-areas:
			"header"
			"content"
			"footer";
	}
	.site-header {
		grid-area: header;
	}
	#nav-menu{
		grid-area: menu;
	}
	#content {
		grid-area: content;
	}
	#footer {
		//positioned absolutely
	}

	.content {
		width: $total-width;
	}

	hr.pre-hori-nav {
		// show element to override inline hide
		display: inherit !important;
		// set background to black to hide content behind
		background-color: $background-colour;

		// move up to the same height as the menu and fix to bottom
		bottom: $nav-hori-lines * 1em;
		position: fixed;

		width: $total-width;

		// nudge up farther, enough to show
		padding-bottom: 2em;
	}

	.nav-menu {
		/* auto add scrollbar, and hide overflow */
		background-color: $background-colour;
		overflow: auto;
		white-space: nowrap;
		// flex to make horizontally scroll
		display: flex;
		// i don't think i need these, but i'm too paranoid to bin them
		overflow-x: auto;
		overflow-y: hidden;

		bottom: -2ch;  /* how can this be negative? */
		position: fixed;

		// padding: 1em 0ch;
		padding-top: 1em;

		width: $total-width;

			& > li {
				padding-right: 4ch;
			}
		}
	footer {
		/* nudge footer up, nav lines + 1 for hr */
		margin-bottom: $nav-hori-lines + 1em;
	}
}

/*============================= generic styles ==============================*/
* {
	/*remove padding globally so text always aligns*/
	margin: 0px;
	padding: 0px;
	border: 0px;
	border-collapse: collapse; /*hide implicit table borders*/
	vertical-align: top;
	text-align: left;

	/* i don't think these do anything, but i have to try */
	-webkit-font-smoothing: none;
	font-smooth: never;
}

html {
	/* smoothly scroll to anchor link */
	scroll-behavior: smooth;

	/* offset anchor link down from the top of the page */
	& :target:before {
		content: "";
		display: block;
		height: 2em;
		margin: -2em 0 0;
	}

	/* colour scrollbars with css */
	scrollbar-color: $text-07 $background-colour;
	/* colour scrollbars, but this time for webkit being dumb */
	&::-webkit-scrollbar {
		border-radius: $crnr-radius;
		background-color: $background-colour;
	}
	&::-webkit-scrollbar-thumb {
		border-radius: $crnr-radius;
		background-color: $text-07;
	}
	&::-webkit-scrollbar-button {
		border-radius: $crnr-radius;
		background-color: $text-08;
	}
	&::-webkit-scrollbar-corner {
		border-radius: $crnr-radius;
		background-color: $background-colour;
	}
}

/* change selected text colour */
::selection {
		background: $background-emph;
	}

body {
	background-color: $background-colour;
	color: $text-10;
	line-height: 1em;
	font-family: $text-font;
	font-size: $text-size;
	/* for glow effect */
	text-shadow: 0px 0px $text-glow;
}

.contents-intro-container {
	/* place contents beside intro */
	display: table;
	width: 100%;
}

.table-of-contents {
	/* has to be here for some reason, also has to be padding not margin*/
	padding-right: 2ch;
	display: table-cell;
	& * {
		/* make each item one line */
		white-space: nowrap;
		width: auto;
	}
}
.page-intro {
	display: table-cell;
}

#clear .clear {
	clear: both; /* just generically clear for flex layouts */
}

/* make all heavier text styles normal weight/size,
just differing brightness (th is table header) */
h1, h2, h3, h4, h5, h6, em, i, strong, b, th {
	font-style: inherit;
	font-weight: inherit;
	line-height: inherit;
	font-size: inherit;
}
h1 {
	color: $text-14;
}
h2 {
	color: $text-13;
}
h3 {
	color: $text-12;
}
h4 {
	color: $text-11;
}
h5 {
	color: $text-09;
}
h6 {
	color: $text-08;
}

em, i, strong, b {
	/* add background to emphasised elements */
	margin: -0em -1ch;
	padding: 0em  1ch;
	background-color: $background-emph;
	/* i know this doesn't make sense, but i think it looks better */
	border-radius: $crnr-radius;
	box-shadow: 0 0 $text-glow $background-emph;
}

strong, b {
	color: $text-12;
}

em, i {
	color: $text-11;
}

/* de-emphasise text. i'm undecided as to the best way to do this:
.weak class (antonym of strong), <small> tag (semantically dubious) */
.weak, small {
	font-size: inherit;
	color: $text-08;
}

a {
	// i just think this layout is easier to read
	&:link {
		color: $text-11;
		text-decoration: underline;
	}
	&:visited {
		color: $text-09;
	}
	/* links glow brighter when hovered over */
	&:hover {
		text-shadow: 0 0 $text-glow * 1.2;
	}

	/* text glows brightest when clicked */
	&:active {
		text-shadow: 0 0 $text-glow * 1.5;
	}
	&:focus {
		outline: none;
		background: $background-emph;
		color: $text-12;
		&::-moz-focus-inner {
			border: 0;
		}
	}
}

p, ol, ul, .contents-intro-container {
	// i don't know why i have to specify .contents-intro-container separately?
	margin-bottom: 1em;
}

hr {
	// nothing here now, all in before/after
}

hr::before, h1::after, h2::after {
	/* is in the ::before of the hr so i can put a line break in the ::after */
	color: $text-09;
	display: block;
	content: $hr-content;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: "";
	// these have to be set in the parent instead? see:
	// https://stackoverflow.com/questions/3970455/how-to-make-\
	// the-overflow-css-property-work-with-hidden-as-value/58119574#58119574
	// text-overflow: none;
	// width: 100%;
	// width: 10em;
}
hr:not(.no-btm-pad)::after {
	/*add line break after horizontal line. */
	content: "\a";
	white-space: pre;
}

li {
	list-style: inside;

	& li {
		/*indent sub lists*/
		margin-left: 2ch;
	}
	&::marker {
		/*this is here just in case, but it shouldn't have any effect*/
		white-space: nowrap;
		/*makes bullets * char (padding space is implicit)*/
		//?\ padding space comes from new line between <li> and contained <a>
		//?\ make sure to remove this spacing
		content: "* ";
	}
	& li::marker {
		content: "- "; /*makes sub list bullets - char*/
	}
}

tr td:nth-child(n+2) {
	/* add padding before all columns of table except first */
	padding-left: 1ch;

	// &:before {
		// content: "¦\A¦";
		// display: inline-block;
	// }
}

/*code, */.ascii-art {
	white-space: pre;
	overflow: hidden;
	display: block;
	font-family: $code-font;
	font-variant-ligatures: none;
	-moz-tab-size: 0;
	tab-size: 0;
}

code {
	font-family: $code-font;
	color: $text-09;
}

abbr {
	// remove dotted underline
	text-decoration: none;
}

/*============================specific styles================================*/

#ascii-header, #ascii-logo {
	color: $text-14;
	/* declared in html so it works in browsers like lynx */
	/* white-space: pre */
}

/* directory layout: capitalise first letter of folders
without downcasing the <DIR> text*/
.dir-entry a {
	text-transform: capitalize;
}

.post-wrapper {
	// table-layout: fixed;
	// width: 88%;
	list-style: none; /*hide bullets*/

	// for making this into a table - maybe ztodo
	// &::before {
		// content: $hr-content;
	// }
}

.post-list {
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;  /* webkit is dumb */
	text-overflow: "..."; /*this is a full ... as it looks better in FxSys*/

	& > .post-title {
		/* force constant width for post titles inside post list,
		but not on post pages themselves */
		display: inline-block;
		width: $post-ttl-chars + 2ch;
	}
}

/* currently a p tag containing the images */
.carousel-container {
	/* auto add scrollbar, and hide overflow */
	overflow: auto;
	white-space: nowrap;

	// https://stackoverflow.com/questions/67022666/\
	// question-about-horizontal-scroll-in-css-with-p-paragraphs-html
	display: flex;
	// i don't think i need these, but i'm too paranoid to bin them
	// justify-content: flex-start;
	// flex-direction: row;
	overflow-x: auto;
	overflow-y: hidden;
	white-space: nowrap;

	& > * {
		display: inline;
		float: left;
		padding-right: 10px;

		display: inline-block;
		align-content: flex-start;
		overflow-x: visible;
		overflow-y: visible;
		flex-wrap: wrap;
		height: 200px;
		width: auto;
	}
}

.showcase {

	max-width: 100%;
	margin: 1em 0ch;

	&.sc-full {
		/*this is only here as a placeholder for now
		sc-full  are images that are pre-formatted to the right dimensions*/
	}

	&.sc-carousel {
		/* show full image disregarding aspect ratio */
		width: auto;
		max-width: none;

		object-fit: cover;
		height: $carousel-height;
		/* for horizontal scrolling */
		// display: inline-block;
	}

	&.sc-wide {
		/* most images - fullwidth */
		object-fit: cover;
		width: 100%;
		height: $showcase-height;

		/* this allows me to choose per image whether i focus
		the top, middle or bottom when zoomed to crop*/
		&.sc-top {
			object-position: top;
		}
		&.sc-mid {
			object-position: center;
		}
		&.sc-btm {
			object-position: bottom;
	}
	}
}

.gc-button {
	// max-height: 31px;
	// object-fit: cover;
}

// an attempt to deal with svgs. semi obsolete.
// img.fullwidth {
	// max-height: 192px;
	// width: $content-width;
	// position: absolute;
// }

/*hide header, only show minified logo on small screens*/
@media only screen and (max-width: $logo-breakpoint) {
	#ascii-header {
		display: none;
	}
	#ascii-logo {
		/*is !important to override inline style,
		has inline style to hide when css isn't loaded*/
		display: block !important;
	}
}
